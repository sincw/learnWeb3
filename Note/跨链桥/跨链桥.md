[详解以太坊扩容全方案](https://baijiahao.baidu.com/s?id=1747454392706508157&wfr=spider&for=pc)

### 跨链桥是什么

跨链桥允许加密货币持有者在不同区块链之间“移动”(或“桥接”)他们的资产。这使他们能够从一条链跳到另一条链并接触其他网络。例如，以太坊上的USDC持有人可能希望通过跨链桥应用程序将他们的USDC从以太坊转移到Avalanche。

跨链桥并不在链之间移动资产，它将一个网络上的资产链接到另一个网络上的资产表示(即打包版本)。跨链交易是通过“锁定”、“铸币”和“销毁”来实现的。

假设Alice想通过一个叫做Bridge的桥应用程序将100个ETH从以太坊桥接到另一个叫做Network Other的网络上(一个组成的区块链网络)：

- Alice在以太坊的Bridge合约中存入100 ETH；
- 以太坊上的桥合约锁定资产，并通知Network Other上的另一个跨链桥合约；只有在用户提出取款请求时才能访问该资产：
- Network Other上的桥合约生成(创建)100个代币WETH，代表被锁的ETH(即打包的ETH)；
- Bridge合约将新铸造的WETH转移到Network Other上Alice的地址。

Alice现在在Network Other上持有100个打包的ETH。后来，她收到了别人发来的10个打包的ETH。现在，她在Network Other上的地址余额增加到110个打包的ETH。她决定将所有资金撤回以太坊：

- 在Network Other上，Alice向桥合约发送110个打包的ETH;
- Network Other上的桥合约烧毁(销毁)110打包的ETH，并通知以太坊上的桥合约;
- 以太坊上的Bridge合约验证提现请求(例如，Alice是否真的在Network Other上拥有110个打包的ETH)。如果所有检查都通过，它将110个ETH解锁到以太坊上Alice的地址:

### 为什么要使用跨链桥

希望从一个网络连接到另一个网络，因为他们需要

- 更快更便宜的交易。
- 使用非网络原生的资产。
- 访问更广泛的dApp。用户可能希望将资金从以太坊连接到Ronin网络，以访问特定于Ronin的应用程序，如他们的游戏dApp；因为一些dapp没有部署在以太坊主网上。
- 从激励计划中获得额外收入。许多用户选择桥接，因为目标网络或目标网络上的项目可能会向其社区成员发送免费代币。

跨链桥能提升链上资产利用率，促进社区合作，推动L2链的发展。

### 跨链桥安全吗？

跨链桥上存储了大量用户质押的代币，这就像蜜罐效应，吸引了黑客的目光。

用户的资金可能在存取款过程中被卡住，或者他们可能成为网络盗窃的受害者。当用户决定连接一个资产时，他们也应该意识到潜在的风险，这样他们就可以做出更多的风险驱动的决定。盗窃风险是最常见的风险，可以导致桥合约失去部分或全部资金。

- 智能合约中的漏洞。编程或逻辑错误会对桥安全造成严重影响，为攻击者创造机会，从桥合约中窃取被锁定的资金。

案例1：2022年2月的Wormhole攻击。该攻击者在智能合约代码中发现了一个漏洞，在未经桥批准的情况下伪造了120,000 个Solana ETH，并于2022年2月2日从以太坊撤回了80000个ETH。幸运的是，Jump Trading通过将120,000 个ETH存入以太坊的桥合约来弥补这一缺口。

案例2：在2022年3月23日，Ronin攻击者破坏了Sky Mavis运行的所有四个验证节点。Sky Mavis是开发了Axie Infinity游戏、Ronin Network和Ronin bridge的公司。再加上第五个验证者(由Axie Dao运行)，攻击者就控制了大多数验证者(9个验证者中有5个)。随后，攻击者在没有经过任何验证的情况下，从以太坊的Ronin桥上提出了173600 ETH和2550万美元的USDC。

许多过渡性决策都是由成本驱动的，选择桥的风险权重与仅仅因为费用低而选择便宜的桥之间有很大的区别。作为一名web3用户，我们需要拥有风险意识。

### 跨链桥有哪些类型？

1. 锁定&铸造（Lock & Mint）Examples: Polygon official bridge, StarkNet official bridge, Shuttle.

2. 通证发行商燃烧&铸造（Token Issuer Burn & Mint）MakerDao, Arbitrum Teleport.

3. 特定的燃烧&铸造（Specialised Burn & Mint）Hop, Debridge.

4. 原子兑换（Atomic Swap） Stargate.

5. 第三方网络/链（Third Party Networks/Chains）Thorchain.

##### 锁定&铸造

最简单和常见的跨链桥涉及了锁定并铸造通证并进行销毁。

![](img\7c8acb663dbfd912a1df2dedb9463356fc14435f.webp)

映射通证（wrapped token)：它会和原生通证保持 1：1 锚定。

标准通证（canonical token)：指的是各个链上流通的原生通证。

这两种通证都以其基础资产完全抵押而铸造完成。当资产跨链回去时，新通证在目标链上被烧毁，原生通证随后在源链上解锁/释放。这个公式非常常见：大多数 “官方” 的 layer1  layer 2 桥都是这样构建的，包括 Polygon、Arbitrum 和 StarkNet 官方桥。

优点：

100% 的抵押品以支持目标链通证，使规模化成为可能。

缺点:

1. 源链上的智能合约易成为黑客的目标，如果源链资金被盗，目标链通证可能一文不值。黑客攻击针对的是持有大量通证的跨链桥智能合约，例如 2022 年 3 月黑客利用 Ronin Bridge 漏洞盗取 6 亿美元。

2. 目标链上的项目和应用程序都依赖于这一个跨链桥，并且在安全性、运行时间、成本等各方面受到跨链桥运营商的牵制。这也被称为 “lock in problem”。

3. 跨链速度慢——当涉及从 Polygon 到 Ethereum 或从 StarkNet/Ex 到 Ethereum 的跨链时，用户可能还愿意等待几个小时，但对于 Arbitrum 和 Optimism 等 OP rollup 上的跨链，用户可不愿意等几天。

##### 由通证发行商燃烧&铸造

这种方法略有不同，它通过激励通证发行商来为跨链提供流动性。换句话说，在尝试 OP rollup 挑战期比较长的时候，通证发行商可以介入，而不是依赖第三方来 “提供” 流动性。

![](img\e1460eaadfdcd9987de522d87af5df21cc44186a.webp)

举例说明，MakerDao Arbitrum Teleporter。MakerDAO 使 Wormhole 在从 Arbitrum 跨链回来 Layer1 时，用户可以快速获得跨链资产 DAI。在这种情况下，MakerDAO 协议通过预言机网络在后台跟踪最终的资金结算。

##### 特定的燃烧&铸造

**一些跨链桥协议将“烧毁和铸造”模型与AMM流动性池相结合**。该流动性池可以包含两个或更多的资产，其中包括特别铸造的跨链资产。重要的是，就像Lock和mint桥一样，这种模型有助于在Layer2与其他链之进行快速资产跨链以及返回源链。 deBridge Finance 和 HOP 属于这一类。当用户将 ETH 锁定在一层以太坊上时，deBridge 会在 Arbitrum 和其他链上铸造特定的跨链桥通证（例如 deETH）。

![](D:\Learn\web3\note\跨链桥\img\8cb712dca59d4e109ab0b1985dcc6080.png)

就deETH 本身而言，它在 Arbitrum 上的用例不多，因为在该生态上存在更广泛使用的其他 ETH 形态。流动供应商可以将 ETH 和 deETH 的组合存入 DeBridge 流动性池，也可以（在Curve Factory）从跨链桥用户那里获取交易费用和套利机会。然后通过在每条链上铸造特定的跨链桥通证，然后通过 AMM 流动性池来设置/初始化跨链。

当用户想要将 USDC 从一个Layer2跨链到另一个Layer2上时（例如，在 Arbitrum 和 Optimism 之间），用户的 Arbitrum USDC 首先使用 Arbitrum 上的 AMM 池换成 deUSDC，然后 deUSDC 在 Arbitrum 上烧毁并在OP上进行铸造。最后一步是使用 Optimism 上的 AMM 池将 deUSDC 换成 USDC。锁定在 Layer1 跨链桥合约中的 USDC 数量在整个过程中保持不变，这意味着 Arbitrum 和 Optimism 上的 deUSDC 仍然是 100% 抵押并可以完全赎回以太坊锁定的 USDC。

当 AMM 池发生滑点时（当 deUSDC 或 USDC 从池中移除或添加时），外部 LP 通过存入或者提取资金来重新平衡流动性池。相较之下，普通的Lock&mint在赎回抵押品时需要较长的等待期。Hop 桥的工作方式大致相同，并且 Hop 和 DeBridge 都对节点验证者有奖惩制度以保证跨链桥在一定的服务水平协议内运行。

**优点：**

通过使用AMM池中特定的跨链桥资产作为跨链的中间步骤，可以有效地增加生态内的流动性，同时也可以让LP赚取因为存在滑点而产生的套利收益。

**缺点：**

这种方法对用户来说成本更高，因为 AMM 流动池没有提供 1:1 的汇率，从而导致有滑点存在。对于将资金存入专门的跨链桥流动性池或持有跨链桥资产（IOU形式）的 LP 也存在风险。

### 原子兑换

原子兑换桥利用已经跨链到目标链的预先存在的标准 / 映射通证（例如 USDC），并将这些通证汇集在源链和目标链上的单个资产池中。

![](D:\Learn\web3\note\跨链桥\img\7c8acb663dbfd912a1df2dedb9463356fc14435f.webp)

当用户使用 Stargate 将 USDC 从 Ethereum 跨链到 Polygon 时，将 USDC 存入源链由 Stargate 智能合约控制的 USDC 池，以及从目标链上的 USDC 池中提取。这种方法可以被认为是「左手倒右手」。

在原子兑换桥的基础上，一些桥还在末端添加了自动做市商交易功能，构建了额外的服务。

**优点：**

用户将不再依赖该跨链桥的安全性来确保目标链上的通证保值。你可以依赖于另一个跨链桥（在非原生通证的情况下），也可以就在目标链上持有原生通证。资产转移也可以非常快速和便宜。

**缺点：**

由于目标链池需要大量通证以扩展，而通过流动性挖矿来激励通证存入可能成本高昂。当存在大量单向流量时，池也很容易耗尽。

### 第三方网络 / 链

可以说，这种传输类型根本不算是跨链桥，而是完全独立的链或网络在充当中间链。当智能合约和消息传递不兼容时（如比特币网络），或者跨链协议需要达成通用化目标时（如跨链通讯），以去中心化的方式进行资产跨链需要第三方网络 / 链充当记账和中间层。这样的网络依赖于源链和目标链上的阈值签名系统（节点网络），需要激励各个节点以保证诚实。
